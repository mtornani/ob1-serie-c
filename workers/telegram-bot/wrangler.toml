name = "ob1-telegram-bot"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[vars]
DATA_URL = "https://mtornani.github.io/ob1-serie-c/data.json"
DASHBOARD_URL = "https://mtornani.github.io/ob1-serie-c/"

# Cloudflare AI for NLP fallback (free tier)
[ai]
binding = "AI"

# KV Namespace for user data (watch profiles, notifications)
[[kv_namespaces]]
binding = "USER_DATA"
id = "8fa1cfab5c5542afa3d2a683411e283c"

# Cron triggers for scheduled tasks
[triggers]
crons = ["0 7 * * *"]  # Daily digest at 07:00 UTC (08:00 Italy)

# Secrets (set via `wrangler secret put`):
# - TELEGRAM_BOT_TOKEN
# - OPENROUTER_API_KEY (optional, for conversational bot)
